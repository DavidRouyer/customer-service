query ticket($id: ID!) {
  ticket(id: $id) {
    id
    assignedTo {
      id
      name
      email
      image
    }
    customer {
      id
      name
      email
      avatarUrl
      phone
    }
    labels {
      id
      labelType {
        id
        name
        icon
        archivedAt
      }
      archivedAt
    }
    status
  }
}

query ticketTimeline($ticketId: ID!) {
  ticket(id: $ticketId) {
    timelineEntries {
      edges {
        cursor
        node {
          id
          customer {
            id
            email
            name
            avatarUrl
          }
          entry {
            __typename
            ... on AssignmentChangedEntry {
              oldAssignedTo {
                id
                name
                email
                emailVerified
                image
              }
              newAssignedTo {
                id
                name
                email
                emailVerified
                image
              }
            }
            ... on ChatEntry {
              text
            }
            ... on LabelsChangedEntry {
              oldLabels {
                id
                labelType {
                  id
                  name
                  icon
                  archivedAt
                }
                archivedAt
              }
              newLabels {
                id
                labelType {
                  id
                  name
                  icon
                  archivedAt
                }
                archivedAt
              }
            }
            ... on NoteEntry {
              text
              rawContent
            }
            ... on PriorityChangedEntry {
              oldPriority
              newPriority
            }
            ... on StatusChangedEntry {
              oldStatus
              newStatus
            }
          }
          createdAt
          userCreatedBy {
            id
            email
            name
            image
          }
          customerCreatedBy {
            id
            email
            name
            avatarUrl
          }
        }
      }
    }
  }
}

query tickets(
  $filters: TicketsFilter
  $first: Int
  $after: String
  $last: Int
  $before: String
) {
  tickets(
    filters: $filters
    first: $first
    after: $after
    last: $last
    before: $before
  ) {
    edges {
      node {
        id
        assignedTo {
          id
          name
          email
          image
        }
        title
        customer {
          id
          name
          email
          avatarUrl
          phone
        }
        status
        statusChangedAt
        priority
        labels {
          id
          labelType {
            id
            name
            icon
            archivedAt
          }
          archivedAt
        }
        createdAt
      }
    }
    pageInfo {
      startCursor
      endCursor
      hasPreviousPage
      hasNextPage
    }
  }
}
